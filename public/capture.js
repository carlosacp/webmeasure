// Generated by CoffeeScript 1.4.0
(function() {

  window.update = function(stream) {
    return document.querySelector('video').src = stream.url;
  };

  window.hasGetUserMedia = function() {
    return !!(navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);
  };

  window.navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;

  window.video = document.querySelector('video');

  window.errorCallback = function(e) {
    return console.log('Reeeejected!', e);
  };

  if (navigator.getUserMedia) {
    alert("OK");
    window.navigator.getUserMedia({
      audio: true,
      video: true
    }, function(stream) {
      return video.src = window.URL.createObjectURL(stream);
    }, window.errorCallback);
  } else {
    alert("false");
    video.src = 'somevideo.webm';
  }

}).call(this);
